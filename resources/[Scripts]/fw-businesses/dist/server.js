(()=>{"use strict";var e={585:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClockedPlayers=void 0;const n=s(586),i=s(483),a=s(611);s(82),t.ClockedPlayers={},onNet("fw-businesses:Server:SetClock",(e=>{const s=source;e.ClockInTime=GetGameTimer(),t.ClockedPlayers[s]=e})),on("playerDropped",(e=>{const s=source;t.ClockedPlayers[s]={Business:"",ClockedIn:!1,ClockInTime:0}})),t.default=()=>{i.FW.Functions.CreateCallback("fw-businesses:Server:GetBusinessesByPlayer",(async(e,t)=>{const s=i.FW.Functions.GetPlayer(e);if(!s)return t([]);const r=[],o=await n.exp.ghmattimysql.executeSync("SELECT * FROM `phone_businesses` WHERE `business_employees` LIKE ? OR `business_owner` = ?",[`%${s.PlayerData.citizenid}%`,s.PlayerData.citizenid]);for(let e=0;e<o.length;e++){const t=o[e];let s=[],n=JSON.parse(t.business_employees);for(let e=0;e<n.length;e++){const t=n[e],i=await(0,a.GetPlayerNameByCid)(t.Cid);i&&s.push({...t,Name:i})}r.push({...t,business_employees:s,business_ranks:JSON.parse(t.business_ranks),owner_name:await(0,a.GetPlayerNameByCid)(t.business_owner)})}t(r)})),i.FW.Functions.CreateCallback("fw-businesses:Server:GetBusinessByName",(async(e,t,s)=>{t(await(0,a.GetBusinessByName)(s))})),i.FW.Functions.CreateCallback("fw-businesses:Server:AddEmployee",(async(e,t,s,r,o)=>{if(!i.FW.Functions.GetPlayer(e))return t({Success:!1,Msg:"Ongeldige speler."});const c=await(0,a.GetBusinessByName)(s);if(!c)return t({Success:!1,Msg:"Ongeldig bedrijf."});if(!(await n.exp.ghmattimysql.executeSync("SELECT `citizenid` FROM `players` WHERE `citizenid` = ?",[r]))[0])return t({Success:!1,Msg:"Ongeldige speler."});const l=JSON.parse(c.business_employees)||[];if(-1!=l.findIndex((e=>e.Cid==r)))return t({Success:!1,Msg:"Speler is al een werknemer"});l.push({Cid:r,Role:o}),await n.exp.ghmattimysql.executeSync("UPDATE `phone_businesses` SET `business_employees` = ? WHERE `business_name` = ?",[JSON.stringify(l),s]);let u=[];for(let e=0;e<l.length;e++){const t=l[e],s=await(0,a.GetPlayerNameByCid)(t.Cid);s&&u.push({...t,Name:s})}t({Success:!0,Employees:u})})),i.FW.Functions.CreateCallback("fw-businesses:Server:SetEmployeeRank",(async(e,t,s,r,o)=>{if(!i.FW.Functions.GetPlayer(e))return t({Success:!1,Msg:"Ongeldige speler."});const c=await(0,a.GetBusinessByName)(s);if(!c)return t({Success:!1,Msg:"Ongeldig bedrijf."});if(!(await n.exp.ghmattimysql.executeSync("SELECT `citizenid` FROM `players` WHERE `citizenid` = ?",[r]))[0])return t({Success:!1,Msg:"Ongeldige speler."});const l=JSON.parse(c.business_employees)||[],u=l.findIndex((e=>e.Cid==r));if(-1==u)return t({Success:!1,Msg:"Speler is geen werknemer"});l[u].Role=o,await n.exp.ghmattimysql.executeSync("UPDATE `phone_businesses` SET `business_employees` = ? WHERE `business_name` = ?",[JSON.stringify(l),s]);let y=[];for(let e=0;e<l.length;e++){const t=l[e],s=await(0,a.GetPlayerNameByCid)(t.Cid);s&&y.push({...t,Name:s})}t({Success:!0,Employees:y})})),i.FW.Functions.CreateCallback("fw-businesses:Server:RemoveEmployee",(async(e,t,s,r)=>{if(!i.FW.Functions.GetPlayer(e))return t({Success:!1,Msg:"Ongeldige speler."});const o=await(0,a.GetBusinessByName)(s);if(!o)return t({Success:!1,Msg:"Ongeldig bedrijf."});if(!(await n.exp.ghmattimysql.executeSync("SELECT `citizenid` FROM `players` WHERE `citizenid` = ?",[r]))[0])return t({Success:!1,Msg:"Ongeldige speler."});let c=JSON.parse(o.business_employees)||[];if(-1==c.findIndex((e=>e.Cid==r)))return t({Success:!1,Msg:"Speler is geen werknemer"});c=c.filter((e=>e.Cid!=r)),await n.exp.ghmattimysql.executeSync("UPDATE `phone_businesses` SET `business_employees` = ? WHERE `business_name` = ?",[JSON.stringify(c),s]);let l=[];for(let e=0;e<c.length;e++){const t=c[e],s=await(0,a.GetPlayerNameByCid)(t.Cid);s&&l.push({...t,Name:s})}t({Success:!0,Employees:l})})),i.FW.Functions.CreateCallback("fw-businesses:Server:CreateRole",(async(e,t,s,r,o)=>{if(!i.FW.Functions.GetPlayer(e))return t({Success:!1,Msg:"Ongeldige Speler"});const c=await(0,a.GetBusinessByName)(s);if(!c)return t({Success:!1,Msg:"Ongeldig Bedrijf"});if(0==r.trim().length)return t({Success:!1,Msg:"Ongeldige rol."});const l=JSON.parse(c.business_ranks);if(-1!=l.findIndex((e=>e.Name.toLowerCase()==r.toLowerCase())))return t({Success:!1,Msg:"Rol bestaat al."});l.push({Name:r,Perms:{Hire:!!o.Hire,Fire:!!o.Fire,ChangeRole:!!o.ChangeRole,PayEmployee:!!o.PayEmployee,PayExternal:!!o.PayExternal,ChargeExternal:!!o.ChargeExternal,PropertyKeys:!!o.PropertyKeys,StashAccess:!!o.StashAccess,CraftAccess:!!o.CraftAccess,VehicleSales:!!o.VehicleSales}}),await n.exp.ghmattimysql.executeSync("UPDATE `phone_businesses` SET `business_ranks` = ? WHERE `business_name` = ?",[JSON.stringify(l),s]),t({Success:!0,Ranks:l})})),i.FW.Functions.CreateCallback("fw-businesses:Server:EditRole",(async(e,t,s,r,o)=>{if(!i.FW.Functions.GetPlayer(e))return t({Success:!1,Msg:"Ongeldige Speler"});const c=await(0,a.GetBusinessByName)(s);if(!c)return t({Success:!1,Msg:"Ongeldig Bedrijf"});if(0==r.trim().length)return t({Success:!1,Msg:"Ongeldige rol."});const l=JSON.parse(c.business_ranks),u=l.findIndex((e=>e.Name.toLowerCase()==r.toLowerCase()));if(-1==u)return t({Success:!1,Msg:"Rol bestaat niet."});l[u].Perms={Hire:!!o.Hire,Fire:!!o.Fire,ChangeRole:!!o.ChangeRole,PayEmployee:!!o.PayEmployee,PayExternal:!!o.PayExternal,ChargeExternal:!!o.ChargeExternal,PropertyKeys:!!o.PropertyKeys,StashAccess:!!o.StashAccess,CraftAccess:!!o.CraftAccess,VehicleSales:!!o.VehicleSales},await n.exp.ghmattimysql.executeSync("UPDATE `phone_businesses` SET `business_ranks` = ? WHERE `business_name` = ?",[JSON.stringify(l),s]),t({Success:!0,Ranks:l})})),i.FW.Functions.CreateCallback("fw-businesses:Server:Delete",(async(e,t,s,r)=>{if(!i.FW.Functions.GetPlayer(e))return t({Success:!1,Msg:"Ongeldige Speler"});const o=await(0,a.GetBusinessByName)(s);if(!o)return t({Success:!1,Msg:"Ongeldig Bedrijf"});if(0==r.trim().length)return t({Success:!1,Msg:"Ongeldige rol."});if(-1!=JSON.parse(o.business_employees).findIndex((e=>e.Role.toLowerCase()==r.toLowerCase())))return t({Success:!1,Msg:"Een werknemer heeft deze rol."});let c=JSON.parse(o.business_ranks);c=c.filter((e=>e.Name.toLowerCase()!=r.toLowerCase())),await n.exp.ghmattimysql.executeSync("UPDATE `phone_businesses` SET `business_ranks` = ? WHERE `business_name` = ?",[JSON.stringify(c),s]),t({Success:!0,Ranks:c})})),i.FW.Functions.CreateCallback("fw-businesses:Server:HasPlayerBusinessPermission",(async(e,t,s,n)=>{t(await(0,a.HasPlayerBusinessPermission)(s,e,n))}))},(0,n.exp)("GetClockedInPlayers",(()=>t.ClockedPlayers))},84:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(586),i=s(483);let a={};const r=[{Item:"vehicle-clutch",Type:"Clutch"},{Item:"vehicle-axle",Type:"Axle"},{Item:"vehicle-brakes",Type:"Brakes"},{Item:"vehicle-engine",Type:"Engine"},{Item:"vehicle-injectors",Type:"FuelInjectors"},{Item:"vehicle-transmission",Type:"Transmission"}];for(let e=0;e<r.length;e++){const{Item:t,Type:s}=r[e];i.FW.Functions.CreateUsableItem(t,(async(e,n)=>{const a=i.FW.Functions.GetPlayer(e);await a.Functions.GetItemBySlot(n.Slot)&&emitNet("fw-businesses:Client:AutoCare:MountPart",e,t,s,n.CustomType)}))}const o=async e=>{const t=a[e];t&&(n.exp.ghmattimysql.execute("UPDATE `player_vehicles` SET `parts` = ? WHERE `plate` = ? LIMIT 1",[JSON.stringify(t),e]),emitNet("fw-businesses:Client:AutoCare:SyncVehicleParts",-1,e,t))};i.FW.Functions.CreateCallback("fw-businesses:Server:AutoCare:GetAllParts",((e,t)=>{t(a)})),i.FW.Functions.CreateCallback("fw-businesses:Server:AutoCare:GetNewPercentage",((e,t,s,a,r,o)=>{const c=i.FW.Functions.GetPlayer(e);if(!c)return;let l=n.exp["fw-vehicles"].GetVehicleMeta(o,s),u=0;switch(s){case"Harness":u=n.exp["fw-inventory"].CalculateQuality("harness",a),l+=u,n.exp["fw-vehicles"].SetVehicleMeta(o,"Harness",l>100?100:l),c.Functions.RemoveItem("harness",1,r,!0);break;case"Nitrous":u=n.exp["fw-inventory"].CalculateQuality("nitrous",a),l+=u,n.exp["fw-vehicles"].SetVehicleMeta(o,"Nitrous",l>100?100:l),c.Functions.RemoveItem("nitrous",1,r,!0)}t(l>100?100:l)})),onNet("fw-businesses:Server:AutoCare:LoadParts",(async e=>{const t=await(async e=>{const t=await n.exp.ghmattimysql.executeSync("SELECT `parts` FROM `player_vehicles` WHERE `plate` = ? LIMIT 1",[e]);return t[0]&&t[0].parts&&JSON.parse(t[0].parts)||void 0})(e);t&&(a[e]=t,emitNet("fw-businesses:Client:AutoCare:SyncVehicleParts",-1,e,t))})),onNet("fw-businesses:Server:AutoCare:RepairPart",(async(e,t)=>{void 0!==a[e]&&(a[e][t]=100,o(e))})),onNet("fw-businesses:Server:AutoCare:ApplyPartDamage",(async(e,t,s)=>{const r=i.FW.Shared.HashVehicles[t];if(!r)return;let c=1;if("Body"==s&&(c=1.6),"A"==r.Class&&(c+=.2),"B"==r.Class&&(c+=.4),"C"==r.Class&&(c+=.6),"D"==r.Class&&(c+=.8),"E"==r.Class&&(c+=1),"M"==r.Class&&(c+=1.2),!a[e])return;const l=Object.keys(a[e]);for(let t=0;t<l.length;t++){const s=l[t];a[e][s]-=.6+c+(0,n.GetRandom)(40,130)/100}o(e)}))},16:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(586),i=s(483),a=s(104);i.FW.Functions.CreateCallback("fw-businesses:Server:BicycleShop:Purchase",(async(e,t,s,r,o,c)=>{const l=i.FW.Functions.GetPlayer(e);if(!l)return;if(!l.Functions.RemoveMoney("cash",i.FW.Shared.CalculateTax("Vehicle Registration Tax",r),"Purchased Bicycle"))return void t({Success:!1});const u=await i.FW.Functions.GeneratePlate(),y=i.FW.Functions.SpawnVehicle(e,s,{x:c.x,y:c.y,z:c.z+1.5,a:c.w},!1,u),f=NetworkGetEntityFromNetworkId(y);for(;!DoesEntityExist(f);)await(0,n.Delay)(25);if(SetEntityHeading(f,c.w+0),!o){const e=i.FW.Shared.HashVehicles[GetHashKey(s)],t=await i.FW.Functions.GenerateVin(),o=new Date,c=o.getFullYear(),y=o.getMonth(),f=o.getDate(),m=o.getHours(),d=o.getMinutes();let h=[e.Name,s,u,t,`${l.PlayerData.charinfo.firstname} ${l.PlayerData.charinfo.lastname}`,"Skelet Spoke",`${f}/${y}/${c} ${m}:${d}`,(0,n.NumberWithCommas)(r)];emit("fw-phone:Server:Documents:AddDocument","1001",{Type:3,Title:`${e.Name} - ${u}`,Content:a.VehicleRegistration.replace(/%s/g,(()=>h.shift()||"")),Signatures:[{Signed:!0,Name:"De Staat",Timestamp:o.getTime(),Cid:"1001"},{Signed:!0,Name:`${l.PlayerData.charinfo.firstname} ${l.PlayerData.charinfo.lastname}`,Timestamp:o.getTime(),Cid:l.PlayerData.citizenid}],Sharees:[l.PlayerData.citizenid],Finalized:1})}t({Success:!0,Plate:u,NetId:y})}))},258:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsItemScrappable=void 0;const n=s(586),i=s(483),a=s(611);t.IsItemScrappable=(e,t)=>{const s=e.findIndex((e=>e.Item==t));return-1!==s&&e[s]},i.FW.Functions.CreateCallback("fw-businesses:Server:Electronics:GetScrapItems",(async(e,s,r)=>{if(!n.exp["fw-config"].IsConfigReady())return s([]);const o=i.FW.Functions.GetPlayer(e);if(!o)return;if(!await(0,a.HasPlayerBusinessPermission)(r,e,"CraftAccess"))return s([]);const c=await n.exp.ghmattimysql.executeSync("SELECT * FROM `player_inventories` WHERE `inventory` = ?",[`ply-${o.PlayerData.citizenid}`]),l=[],{allowDecayedScrap:u,scrapItems:y}=n.exp["fw-config"].GetModuleConfig("bus-electronics",{});if(!y||0==y.length)return s([]);for(let e=0;e<c.length;e++){const s=c[e];if(!s)continue;const i=(0,t.IsItemScrappable)(y,s.item_name);if(!i)continue;const a=n.exp["fw-inventory"].CalculateQuality(s.item_name,s.createdate);!u&&a<=5||l.push({Label:i.Label,Slot:s.slot,Parts:4-Math.floor((100-a)/33),Materials:Math.floor((100-a)/100*75)})}s(l)})),onNet("fw-businesses:Server:Electronics:ScrapElectronic",(async e=>{if(!n.exp["fw-config"].IsConfigReady())return;const s=source,r=i.FW.Functions.GetPlayer(s);if(!r)return;if(!await(0,a.HasPlayerBusinessPermission)(e.Business,s,"CraftAccess"))return;const{scrapItems:o}=n.exp["fw-config"].GetModuleConfig("bus-electronics"),c=await n.exp["fw-inventory"].GetInventoryItemBySlot(`ply-${r.PlayerData.citizenid}`,e.Slot);if(!c)return;const l=(0,t.IsItemScrappable)(o,c.Item);if(!l)return;const u=(0,n.GetRandom)(l.Rewards[0],l.Rewards[1]);await r.Functions.RemoveItem(c.Item,1,e.Slot,!0)&&(await(0,n.Delay)(10),r.Functions.AddItem("electronics",u*e.Parts,!1,!1,!0,!1))})),onNet("fw-businesses:Server:Electronics:RepairElectronic",(async e=>{if(!n.exp["fw-config"].IsConfigReady())return;const s=source,r=i.FW.Functions.GetPlayer(s);if(!r)return;if(!await(0,a.HasPlayerBusinessPermission)(e.Business,s,"CraftAccess"))return;const{scrapItems:o}=n.exp["fw-config"].GetModuleConfig("bus-electronics"),c=await n.exp["fw-inventory"].GetInventoryItemBySlot(`ply-${r.PlayerData.citizenid}`,e.Slot);c&&(0,t.IsItemScrappable)(o,c.Item)&&(await r.Functions.RemoveItemByName("electronics",e.Materials,!0)?(n.exp["fw-inventory"].IncreaseQualityItemFromInventory(`ply-${r.PlayerData.citizenid}`,c.Item,100,e.Slot),r.Functions.Notify("Gerepareerd!")):r.Functions.Notify("Je hebt niet genoeg eletronica..","error"))})),onNet("fw-businesses:Server:Electronics:RemoveMusicEntry",(async e=>{const t=source,s=i.FW.Functions.GetPlayer(t);if(s){if(!(0,a.HasPlayerBusinessPermission)(e.Business,t,"CraftAccess"))return s.Functions.Notify("Geen toegang.","error");await n.exp.ghmattimysql.executeSync("DELETE FROM `musictapes` WHERE `id` = ?",[e.TrackId]),s.Functions.Notify("Track verwijderd!"),setTimeout((()=>{emitNet("fw-businesses:Client:Electronics:ManageMusicEntries",t,{Business:e.Business})}),150),emit("fw-logs:Server:Log","musictapes","Track Entry Deleted",`User: [${s.PlayerData.source}] - ${s.PlayerData.citizenid} - ${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname}\nEntry Id: ${e.TrackId}`,"red")}})),i.FW.RegisterServer("fw-businesses:Server:Electronics:AddMusicEntry",(async(e,t)=>{const s=i.FW.Functions.GetPlayer(e);if(!s)return;if(!(0,a.HasPlayerBusinessPermission)(t.Business,e,"CraftAccess"))return s.Functions.Notify("Geen toegang.","error");const r=await n.exp.ghmattimysql.executeSync("INSERT INTO `musictapes` (tape_id, tape_title, tape_artist) VALUES (?, ?, ?)",[t.TapeId,t.Title,t.Artist]);TriggerEvent("fw-logs:Server:Log","musictapes","Track Entry Added",`User: [${s.PlayerData.source}] - ${s.PlayerData.citizenid} - ${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname}\nEntry ID: ${r.insertId}\nSoundcloud Track Id: [${t.TapeId}](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${t.TapeId}&color=%232cffb8&auto_play=true&hide_related=true&show_comments=false&show_user=false&show_reposts=false&show_teaser=false)\nTape: ${t.Artist} - ${t.Title}`,"green")})),i.FW.RegisterServer("fw-businesses:Server:Electronics:CreateCassetteTapes",(async(e,t)=>{const s=i.FW.Functions.GetPlayer(e);if(!s)return;if(!(0,a.HasPlayerBusinessPermission)(t.Business,e,"CraftAccess"))return s.Functions.Notify("Geen toegang.","error");const r=await n.exp.ghmattimysql.executeSync("SELECT * FROM `musictapes` WHERE `id` = ?",[t.TrackId]);if(!r[0])return s.Functions.Notify("Track bestaat niet..");for(let e=0;e<t.Copies;e++)s.Functions.AddItem("musictape",1,void 0,{Artist:r[0].tape_artist,Title:r[0].tape_title,_TrackId:r[0].tape_id},!0)})),i.FW.Functions.CreateCallback("fw-businesses:Server:Electronics:GetMusicEntries",(async(e,t)=>{i.FW.Functions.GetPlayer(e)&&t(await n.exp.ghmattimysql.executeSync("SELECT * FROM `musictapes`"))}))},722:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(586),i=s(483),a=s(611),r=e=>n.exp["fw-cityhall"].GetLicenseTemplate().replace(/%s/g,(()=>e.shift()||""));i.FW.Functions.CreateCallback("fw-businesses:Server:Flightschool:GivePilotLicense",(async(e,t,s)=>{const o=i.FW.Functions.GetPlayer(e);if(!o)return t({Success:!1,Msg:"Ongeldige speler."});const c=i.FW.Functions.GetPlayerByCitizenId(s.Cid);if(!c)return t({Success:!1,Msg:"Ongeldige speler."});if(!await(0,a.HasPlayerBusinessPermission)("Los Santos Vliegschool",e,"ChargeExternal"))return t({Success:!1,Msg:"Geen toegang.."});if(s.Give){const e=new Date,t=e.getFullYear(),s=e.getMonth(),n=e.getDate(),i=e.getHours(),a=e.getMinutes();emit("fw-phone:Server:Documents:AddDocument","1001",{Type:1,Title:`Vliegbrevet - ${c.PlayerData.citizenid}`,Content:r([`${c.PlayerData.charinfo.firstname} ${c.PlayerData.charinfo.lastname}`,c.PlayerData.citizenid,0==c.PlayerData.charinfo.gender?"Man":"Vrouw",`${o.PlayerData.charinfo.firstname} ${o.PlayerData.charinfo.lastname}`,`${n}/${s+1}/${t} ${i}:${a}`]),Signatures:[{Signed:!0,Name:"De Staat",Timestamp:e.getTime(),Cid:"1001"}],Sharees:[c.PlayerData.citizenid],Finalized:1})}else n.exp.ghmattimysql.executeSync("DELETE FROM `phone_documents` WHERE `type` = 1 AND `title` = ? AND `sharees` LIKE ?",[`Vliegbrevet - ${c.PlayerData.citizenid}`,`%${c.PlayerData.citizenid}%`]);c.Functions.SetMetaDataTable("licenses","flying",s.Give),t({Success:!0})}))},755:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(586),i=s(483),a=s(611);let r={},o={};i.FW.RegisterServer("fw-businesses:Server:Foodchain:SetPaymentData",(async(e,t,s,n,r)=>{const c=i.FW.Functions.GetPlayer(e);if(c){if(!await(0,a.HasPlayerBusinessPermission)(t,e,"ChargeExternal"))return c.Functions.Notify("Geen toegang..","error");o[t]||(o[t]=[]),o[t][s-1]={Order:n,Costs:i.FW.Shared.CalculateTax("Services",r),CostsWithoutTax:r,Employee:{Name:`${c.PlayerData.charinfo.firstname} ${c.PlayerData.charinfo.lastname}`,Cid:c.PlayerData.citizenid,Source:e}}}})),i.FW.Functions.CreateCallback("fw-businesses:Server:Foodchain:GetPaymentData",((e,t,s,n)=>o[s]&&o[s][n-1]?void t(o[s][n-1]):t(!1))),onNet("fw-businesses:Server:Foodchain:PayRegister",(async e=>{const t=i.FW.Functions.GetPlayer(source);if(!t)return;if(!o[e.Business])return;const s=o[e.Business][e.RegisterId-1];if(!s)return;const r=await(0,a.GetBusinessAccount)(e.Business);"Cash"==e.PaymentType&&t.Functions.RemoveMoney("cash",s.Costs)||"Bank"==e.PaymentType&&n.exp["fw-financials"].RemoveMoneyFromAccount(s.Employee.Cid,r,t.PlayerData.charinfo.account,s.Costs,"PURCHASE",`Betaling zakelijke dienstverlening: ${s.Order}`,!1)?("Bank"==e.PaymentType&&emitNet("fw-phone:Client:Notification",t.PlayerData.source,`business-pay-${e.Business}-${e.RegisterId}`,"fas fa-home",["white","rgb(38, 50, 56)"],e.Business,`${(0,n.NumberWithCommas)(s.Costs)} afgeschreven van je bankrekening.`),emitNet("fw-phone:Client:Notification",s.Employee.Source,`business-payment-${e.Business}-${e.RegisterId}`,"fas fa-home",["white","rgb(38, 50, 56)"],e.Business,`${(0,n.NumberWithCommas)(s.Costs)} is succesvol afgeschreven.`),n.exp["fw-financials"].AddMoneyToAccount(t.PlayerData.citizenid,t.PlayerData.charinfo.account,r,s.CostsWithoutTax,"PURCHASE",`Betaling zakelijke dienstverlening: ${s.Order}`,!1),n.exp["fw-financials"].AddMoneyToAccount("1001","1","1",s.Costs-s.CostsWithoutTax,"TAX",`Services Tax. (${e.Business}: ${(0,n.NumberWithCommas)(s.Costs)})`,!1),o[e.Business][e.RegisterId-1]=!1,emitNet("fw-businesses:Client:Foodchain:RecieveReceipt",-1,e.Business,{Check:"Penis Twister 9000"})):t.Functions.Notify("Je hebt niet genoeg geld..","error")})),onNet("fw-businesses:Server:ReceiveReceipt",(e=>{if("Penis Twister 9000"!=e.Check)return;const t=i.FW.Functions.GetPlayer(source);t&&t.Functions.AddItem("business-ticket",1,!1,!1,!0)})),onNet("fw-businesses:Server:SellReceipts",(async()=>{const e=i.FW.Functions.GetPlayer(source);if(!e)return;const t=await n.exp.ghmattimysql.executeSync("SELECT item_name, custom_type, slot, createdate FROM `player_inventories` WHERE `inventory` = ?",[`ply-${e.PlayerData.citizenid}`]);let s=0;for(let i=0;i<t.length;i++)"business-ticket"==t[i].item_name&&(e.Functions.RemoveItemByName("business-ticket",1,!1),s+=(0,n.GetRandom)(55,75));s>0&&(e.Functions.Notify("Balans is toegevoegd op je bank."),n.exp["fw-financials"].AddMoneyToAccount("1001","1",e.PlayerData.charinfo.account,s,"DEPOSIT","Baan: Bonnetjes verkoop"))})),i.FW.RegisterServer("fw-businesses:Server:Foodchain:FinishMeal",(async(e,t,s)=>{const a=i.FW.Functions.GetPlayer(e);if(!a)return;const{ingredientCategories:r,foodchainBuffs:o}=await n.exp["fw-config"].GetModuleConfig("bus-foodchains");for(let e=0;e<s.ingredients.length;e++){const t=s.ingredients[e];for(let e=0;e<r[t].length&&!a.Functions.RemoveItemByName("ingredient",1,!0,r[t][e]);e++);}const c=o[t];a.Functions.AddItem(s.item,1,!1,{Buff:c?c[Math.floor(Math.random()*c.length)]:void 0,BuffPercentage:(0,n.GetRandom)(10,25)},!0,s.dish_id)})),i.FW.Functions.CreateCallback("fw-businesses:Server:Foodchain:GetDishes",((e,t,s,n)=>{if(!r[s]||!r[s][n])return t([]);t(r[s][n])}));const c=/https:\/\/i\.imgur\.com\/[a-zA-Z0-9]+\.png$/i;i.FW.RegisterServer("fw-businesses:Server:Foodchain:CreateItem",(async(e,t,s,r)=>{const o=i.FW.Functions.GetPlayer(e);if(!o)return;if("Prison"!=r.Business&&await(0,a.GetBusinessOwner)(t)!=o.PlayerData.citizenid)return;const{foodchainIds:l,ingredientsPerDish:u,dishItems:y}=await n.exp["fw-config"].GetModuleConfig("bus-foodchains"),f=`${l[t]}-${r.Name.toLowerCase().replaceAll(" ","-")}`;if(0!=(await n.exp.ghmattimysql.executeSync("SELECT COUNT(*) as Amount FROM `server_customtypes` WHERE `type_id` = ?",[f]))[0].Amount)return o.Functions.Notify("Dish bestaat al!","error");if(!c.test(r.Image))return o.Functions.Notify("Icoon moet een imgur PNG image zijn! (bv. https://i.imgur.com/SteKs2I.png","error");let m=[];for(let e=0;e<u[s];e++)m.push(r[`Ingredient${e+1}`]);n.exp.ghmattimysql.executeSync("INSERT INTO `businesses_dishes` (`foodchain`, `type`, `dish_id`, `ingredients`) VALUES (?, ?, ?, ?)",[t,s,f,JSON.stringify(m)]),n.exp.ghmattimysql.executeSync("INSERT INTO `server_customtypes` (`item_id`, `type_id`, `label`, `description`, `image`, `craft`, `isExternImage`) VALUES (?, ?, ?, ?, ?, '[]', 1)",[y[s],f,r.Name,r.Description,r.Image]),o.Functions.Notify("Gerecht toegevoegd!"),TriggerEvent("fw-logs:Server:Log","menuManagement","Dish Created",`User: [${o.PlayerData.source}] - ${o.PlayerData.citizenid} - ${o.PlayerData.charinfo.firstname} ${o.PlayerData.charinfo.lastname}\nFoodchain: ${t}\nDish Type: ${s}\nData: \`\`\`json\n${JSON.stringify(r,void 0,2)}\`\`\``,"green")})),i.FW.Functions.CreateCallback("fw-businesses:Server:Foodchain:GetItem",(async(e,t,s,i)=>{t(n.exp.ghmattimysql.executeSync("SELECT `label` AS Label, `description` AS Description FROM `server_customtypes` WHERE `item_id` = ? AND `type_id` = ?",[s,i])[0])})),i.FW.Functions.CreateCallback("fw-businesses:Server:Foodchain:GetDBDishes",(async(e,t,s,i)=>{const a=await n.exp.ghmattimysql.executeSync("SELECT * FROM `businesses_dishes` WHERE `foodchain` = ? AND `type` = ?",[s,i]),{dishItems:r}=await n.exp["fw-config"].GetModuleConfig("bus-foodchains");for(let e=0;e<a.length;e++){const t=a[e];a[e].item=r[i],a[e].ingredients=JSON.parse(t.ingredients)}t(a)})),onNet("fw-businesses:Server:Foodchain:DeleteItem",(async e=>{console.log("Hi?");const t=i.FW.Functions.GetPlayer(source);if(t){if("Prison"!=e.Foodchain&&await(0,a.GetBusinessOwner)(e.Foodchain)!=t.PlayerData.citizenid)return t.Functions.Notify("Geen toegang..","error");await n.exp.ghmattimysql.executeSync("DELETE FROM `businesses_dishes` WHERE `id` = ?",[e.DishId]),t.Functions.Notify("Gerecht verwijderd!")}})),onNet("fw-businesses:Server:Foodchain:GrabBusinessBag",(async e=>{const t=i.FW.Functions.GetPlayer(source);if(!t)return;if(!await(0,a.HasPlayerBusinessPermission)(e.Business,t.PlayerData.source,"ChargeExternal"))return t.Functions.Notify("Geen toegang..","error");const s=`bag-${(new Date).getTime()}${(0,n.GetRandom)(1,999999)}`;t.Functions.AddItem("business-bag",1,!1,{BagId:s},!0,e.Type)})),onNet("fw-businesses:Server:Foodchain:GrabBusinessGift",(async e=>{const t=i.FW.Functions.GetPlayer(source);if(t)return(0,a.IsClockedIn)(t.PlayerData.source,e.Business)?void("uwucafe"==e.Type&&t.Functions.AddItem("uwu-mystery-box",1,!1,void 0,!0)):t.Functions.Notify("Geen toegang..","error")})),setImmediate((async()=>{const e=await n.exp.ghmattimysql.executeSync("SELECT * FROM `businesses_dishes`"),{dishItems:t}=await n.exp["fw-config"].GetModuleConfig("bus-foodchains");for(let s=0;s<e.length;s++){const n=e[s];r[n.foodchain]||(r[n.foodchain]={}),r[n.foodchain][n.type]||(r[n.foodchain][n.type]=[]),r[n.foodchain][n.type].push({foodchain:n.foodchain,type:n.type,dish_id:n.dish_id,item:t[n.type],ingredients:JSON.parse(n.ingredients)})}console.log(`[FOODCHAIN] Loaded a total of ${e.length} dishes.`)})),onNet("fw-businesses:Server:Foodchain:OpenMystery",(e=>{const t=i.FW.Functions.GetPlayer(source);if(!t)return;const s=["uwu-toy-biker","uwu-toy-business","uwu-toy-burglar","uwu-toy-doctor","uwu-toy-fisher","uwu-toy-maid","uwu-toy-officer","uwu-toy-wizard","uwu-toy-worker"];t.Functions.RemoveItem("uwu-mystery-box",1,e.Slot)&&t.Functions.AddItem(s[Math.floor(Math.random()*s.length)],1,!1,!1,!0)}))},82:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),s(722),s(822),s(104),s(16),s(84),s(258),s(641),s(755)},822:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(483);onNet("fw-businesses:Server:News:PurchaseCamera",(()=>{const e=source,t=n.FW.Functions.GetPlayer(e);if(t)return"news"!=t.PlayerData.job.name?t.Functions.Notify("Geen toegang..","error"):t.Functions.RemoveMoney("cash",85,"Purchase News Item")?void t.Functions.AddItem("newscamera",1,!1,void 0,!0):t.Functions.Notify("Niet genoeg cash..","error")})),onNet("fw-businesses:Server:News:PurchaseMic",(()=>{const e=source,t=n.FW.Functions.GetPlayer(e);if(t)return"news"!=t.PlayerData.job.name?t.Functions.Notify("Geen toegang..","error"):t.Functions.RemoveMoney("cash",85,"Purchase News Item")?void t.Functions.AddItem("newsmic",1,!1,void 0,!0):t.Functions.Notify("Niet genoeg cash..","error")}))},641:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(586),i=s(611),a=s(258),r=s(483);r.FW.Functions.CreateCallback("fw-businesses:Server:PawnHub:GetScrapItems",(async(e,t)=>{if(!n.exp["fw-config"].IsConfigReady())return t([]);const s=r.FW.Functions.GetPlayer(e);if(!s)return;if(!await(0,i.HasPlayerBusinessPermission)("PawnNGo",e,"CraftAccess"))return t([]);const o=await n.exp.ghmattimysql.executeSync("SELECT * FROM `player_inventories` WHERE `inventory` = ?",[`ply-${s.PlayerData.citizenid}`]),c=[],{allowDecayedScrap:l,scrapItems:u}=n.exp["fw-config"].GetModuleConfig("bus-pawnhub",{});if(!u||0==u.length)return t([]);for(let e=0;e<o.length;e++){const t=o[e];if(!t)continue;if(!(0,a.IsItemScrappable)(u,t.item_name))continue;const s=n.exp["fw-inventory"].CalculateQuality(t.item_name,t.createdate);if(!l&&s<=5)continue;const i=n.exp["fw-inventory"].GetItemData(t.item_name,t.customtype);c.push({Label:i.Label,Slot:t.slot,Parts:4-Math.floor((100-s)/33),Materials:Math.floor((100-s)/100*75)})}t(c)})),onNet("fw-businesses:Server:PawnHub:ScrapElectronic",(async e=>{if(!n.exp["fw-config"].IsConfigReady())return;const t=source,s=r.FW.Functions.GetPlayer(t);if(!s)return;if(!await(0,i.HasPlayerBusinessPermission)("PawnNGo",t,"CraftAccess"))return;const{scrapItems:o}=n.exp["fw-config"].GetModuleConfig("bus-pawnhub"),c=await n.exp["fw-inventory"].GetInventoryItemBySlot(`ply-${s.PlayerData.citizenid}`,e.Slot);if(!c)return;const l=(0,a.IsItemScrappable)(o,c.Item);if(!l)return;const u=(0,n.GetRandom)(l.Rewards[0],l.Rewards[1]),y=["metalscrap","plastic","aluminum","copper"];if(await s.Functions.RemoveItem(c.Item,1,e.Slot,!0))for(let t=0;t<3;t++)await(0,n.Delay)(50),s.Functions.AddItem(y[Math.floor(Math.random()*y.length)],Math.ceil(u*e.Parts*.33),!1,!1,!0,!1)}))},104:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VehicleRegistration=void 0;const n=s(586),i=s(483),a=s(611);t.VehicleRegistration='<h3>Los Santos DMV</h3><figure class="table"><table><thead><tr><th>&nbsp;</th><th>Data</th></tr></thead><tbody><tr><th>Naam</th><td>%s</td></tr><tr><th>Model</th><td>%s</td></tr><tr><th>Kenteken</th><td>%s</td></tr><tr><th>Vin</th><td>%s</td></tr></tbody></table></figure><p>&nbsp;</p><h3>Eigendom Geschiedenis</h3><figure class="table"><table><thead><tr><th>Eigenaar</th><th>Verkoper</th><th>Datum</th><th>Prijs</th></tr></thead><tbody><tr><td>%s</td><td>%s</td><td>%s</td><td>%s</td></tr></tbody></table></figure>',(0,n.exp)("GetVehicleRegistration",(()=>t.VehicleRegistration));const r=e=>n.exp["fw-config"].GetModuleConfig("bus-vehicleshop").ShopData[e],o={pdm:[{Coords:{x:-49.79,y:-1083.58,z:26.96,w:250.88},Vehicle:!1},{Coords:{x:-47.67,y:-1091.92,z:26.96,w:283.11},Vehicle:!1},{Coords:{x:-54.82,y:-1097,z:26.96,w:33.24},Vehicle:!1},{Coords:{x:-37.21,y:-1093.27,z:26.96,w:210.76},Vehicle:!1},{Coords:{x:-42.41,y:-1101.29,z:26.96,w:12.22},Vehicle:!1}],bennys:[{Coords:{x:-191.15,y:-1308.34,z:30.68,w:21.76},Vehicle:!1},{Coords:{x:-195.74,y:-1307.82,z:30.7,w:21.75},Vehicle:!1}],flightschool:[{Coords:{x:-969,y:-2934.08,z:13.66,w:183.14},Vehicle:!1},{Coords:{x:-956.49,y:-2940.2,z:13.66,w:134.18},Vehicle:!1}],lostmc:[{Coords:{x:983.51,y:-114.82,z:73.29,w:100.21},Vehicle:!1},{Coords:{x:981.72,y:-117.07,z:73.3,w:108.7},Vehicle:!1},{Coords:{x:985.26,y:-111.66,z:73.46,w:101.77},Vehicle:!1}],losmuertos:[{Coords:{x:1218.79,y:3614.03,z:33.09,w:39.16},Vehicle:!1},{Coords:{x:1222.54,y:3615.07,z:33.08,w:36.68},Vehicle:!1},{Coords:{x:1226.67,y:3615.84,z:33.08,w:38.55},Vehicle:!1}],darkwolves:[{Coords:{x:1707.66,y:4808.54,z:41.2,w:147.02},Vehicle:!1},{Coords:{x:1710.49,y:4808.31,z:41.18,w:146.5},Vehicle:!1},{Coords:{x:1713.09,y:4808.04,z:41.16,w:145.83},Vehicle:!1}]};setImmediate((async()=>{const e=["pdm","bennys","flightschool","lostmc","darkwolves","losmuertos"];for(let t=0;t<e.length;t++){const s=e[t],i=await n.exp.ghmattimysql.executeSync("SELECT `vehicle` FROM `server_vehicles` WHERE `shop` = ? AND `stock` > 0",[s]);if(0!=i.length)for(let e=0;e<o[s].length;e++)i[e]?o[s][e].Vehicle=i[e].vehicle:o[s][e].Vehicle=!1}})),i.FW.Functions.CreateCallback("fw-businesses:Server:GetVehicleShopPlacements",(async(e,t,s)=>{t(o[s])})),i.FW.Functions.CreateCallback("fw-businesses:Server:VehicleShop:GetPreset",(async(e,t,s,i)=>{const a=await n.exp.ghmattimysql.executeSync("SELECT `preset` FROM `server_vehicles` WHERE `shop` = ? AND `vehicle` = ?",[s,i]);t(a[0]&&JSON.parse(a[0].preset)||{})})),i.FW.Functions.CreateCallback("fw-businesses:Server:VehicleShop:GetShopData",(async(e,t,s)=>{t(r(s))})),i.FW.Functions.CreateCallback("fw-businesses:Server:GetCatalog",(async(e,t,s)=>{const a=await n.exp.ghmattimysql.executeSync("SELECT `vehicle` FROM `server_vehicles` WHERE `shop` = ?",[s]);let r=[];for(let e=0;e<a.length;e++){const t=i.FW.Shared.HashVehicles[GetHashKey(a[e].vehicle)];if(t){const e=i.FW.Shared.CalculateTax("Vehicle Registration Tax",t.Price);r.push({...t,Price:1.07*e})}}t(r)})),i.FW.RegisterServer("fw-businesses:Server:QuicksellVehicle",(async(e,t,s,a)=>{const r=i.FW.Functions.GetPlayer(e);if(!r)return;const o=i.FW.Shared.HashVehicles[a];if(!o)return r.Functions.Notify("Dit voertuig kan niet gequickselled worden!");const c=await n.exp.ghmattimysql.executeSync("SELECT `citizenid`, `metadata`, `vinscratched` FROM `player_vehicles` WHERE `plate` = ?",[s]);if(!c[0])return r.Functions.Notify("Dit voertuig kan niet gequickselled worden!");if(c[0].citizenid!=r.PlayerData.citizenid)return r.Functions.Notify("Dit voertuig kan niet gequickselled worden!");if(c[0].vinscratched&&1==c[0].vinscratched)return r.Functions.Notify("Dit voertuig kan niet gequickselled worden!");if(DeleteEntity(NetworkGetEntityFromNetworkId(t)),JSON.parse(c[0].metadata).Gifted)r.Functions.Notify("Je hebt je cadeau-voertuig gratis verkocht.");else{const[e,t]=i.FW.Shared.DeductTax("Vehicle Registration Tax",.65*o.Price);n.exp["fw-financials"].AddMoneyToAccount("1001","1",r.PlayerData.charinfo.account,e,"TRANSFER",`Voertuig quick-sell ${o.Vehicle} [${s}]`),r.Functions.Notify("Toegevoegd op bank balans.")}n.exp.ghmattimysql.executeSync("DELETE FROM `player_vehicles` WHERE `plate` = ? and `citizenid` = ?",[s,r.PlayerData.citizenid])})),onNet("fw-businesses:Server:ChangeVehicle",((e,t,s)=>{o[e][t].Vehicle=s,emitNet("fw-businesses:Client:VehicleShop:SetVehicle",-1,e,t,s)})),onNet("fw-businesses:Server:VehicleShop:TestDrive",(async(e,t,s)=>{const i=await n.exp.ghmattimysql.executeSync("SELECT `stock` FROM `server_vehicles` WHERE `shop` = ? AND `vehicle` = ?",[e,t]);i[0]&&n.exp.ghmattimysql.executeSync("UPDATE `server_vehicles` SET `stock` = ? WHERE `shop` = ? AND `vehicle` = ?",[s?i[0].stock+1:i[0].stock-1,e,t])})),onNet("fw-businesses:Server:VehicleShop:SellVehicle",(async(e,t,s)=>{const o=source;if(!i.FW.Functions.GetPlayer(o))return;const c=i.FW.Functions.GetPlayerByCitizenId(t.Cid);if(!c)return;const l=r(e.Shop);l&&await(0,a.HasPlayerBusinessPermission)(l.BusinessName,o,"VehicleSales")&&emitNet("fw-phone:Client:Notification",c.PlayerData.source,`purchase-vehicle-${t.Cid}`,"fas fa-car",["white","rgb(38, 50, 56)"],"Voertuig Kopen",`${(0,n.NumberWithCommas)(Number(t.Amount))} incl. tax`,!1,!0,"fw-businesses:Server:VehicleShop:Purchase","fw-phone:Client:RemoveNotificationById",{Id:`purchase-vehicle-${t.Cid}`,Cid:t.Cid,Seller:o,Business:e.Shop,Amount:t.Amount,NetId:s,Model:e.Vehicle})})),onNet("fw-businesses:Server:VehicleShop:Purchase",(e=>{const s=source,o=i.FW.Functions.GetPlayer(s);if(!o)return;const c=i.FW.Functions.GetPlayer(e.Seller);if(!c)return;const l=i.FW.Shared.HashVehicles[GetHashKey(e.Model)];if(!l)return;const u=r(e.Business);emitNet("fw-phone:Client:UpdateNotification",s,e.Id,!0,!0,!1,"Kopen...",!0),setTimeout((async()=>{const r=await(0,a.GetBusinessAccount)(u.BusinessName);if(!await n.exp["fw-financials"].RemoveMoneyFromAccount(c.PlayerData.citizenid,r,o.PlayerData.charinfo.account,e.Amount,"PURCHASE",`Betaling zakelijke dienstverlening: ${e.Model} gekocht!`))return void emitNet("fw-phone:Client:UpdateNotification",s,e.Id,!0,!0,!1,"Transactie Geweigerd!",!0);emitNet("fw-phone:Client:UpdateNotification",s,e.Id,!0,!0,!1,"Transactie voltooid!",!0);const y=await i.FW.Functions.GeneratePlate(),f=await i.FW.Functions.GenerateVin();n.exp.ghmattimysql.executeSync("INSERT INTO `player_vehicles` (`citizenid`, `vehicle`, `plate`, `state`, `vinnumber`) VALUES (?, ?, ?, 'out', ?)",[o.PlayerData.citizenid,e.Model,y,f]),n.exp.ghmattimysql.executeSync("INSERT INTO `vehicles_ownership` (seller, buyer, plate, price, timestamp) VALUES (?, ?, ?, ?, ?)",[u.BusinessName,c.PlayerData.citizenid,y,e.Amount,(new Date).getTime()]);const m=new Date,d=m.getFullYear(),h=m.getMonth(),g=m.getDate(),p=m.getHours(),S=m.getMinutes(),w=e.Amount-l.Price;n.exp["fw-financials"].AddMoneyToAccount(c.PlayerData.citizenid,c.PlayerData.charinfo.account,r,l.Price+Math.min(w,.05*l.Price),"PURCHASE",`Betaling zakelijke dienstverlening: ${e.Model} [${y}] verkocht!`),emit("fw-logs:Server:Log",e.Business,"Vehicle Sold",`User: [${c.PlayerData.source}] - ${c.PlayerData.citizenid} - ${c.PlayerData.charinfo.firstname} ${c.PlayerData.charinfo.lastname}\nBuyer: [${o.PlayerData.source}] - ${o.PlayerData.citizenid} - ${o.PlayerData.charinfo.firstname} ${o.PlayerData.charinfo.lastname}\nModel: ${e.Model} [${y}]\nSold Price: ${(0,n.NumberWithCommas)(e.Amount)}\nRetail Price: ${(0,n.NumberWithCommas)(l.Price)}`,"green");let C=[l.Name,e.Model,y,f,`${o.PlayerData.charinfo.firstname} ${o.PlayerData.charinfo.lastname}`,`${c.PlayerData.charinfo.firstname} ${c.PlayerData.charinfo.lastname}`,`${g}/${h}/${d} ${p}:${S}`,(0,n.NumberWithCommas)(Number(e.Amount))];emitNet("fw-businesses:Client:VehicleShop:LoadVehicle",s,e.NetId,y),emitNet("fw-phone:Client:Cars:SetTestDrive",c.PlayerData.source,!1),emit("fw-phone:Server:Documents:AddDocument","1001",{Type:3,Title:`${l.Name} - ${y}`,Content:t.VehicleRegistration.replace(/%s/g,(()=>C.shift()||"")),Signatures:[{Signed:!0,Name:"De Staat",Timestamp:m.getTime(),Cid:"1001"},{Signed:!0,Name:`${o.PlayerData.charinfo.firstname} ${o.PlayerData.charinfo.lastname}`,Timestamp:m.getTime(),Cid:o.PlayerData.citizenid}],Sharees:[o.PlayerData.citizenid],Finalized:1})}),1e3)})),onNet("fw-businesses:Server:VehicleShop:SetPreset",(async(e,t,s)=>{const o=source;if(!i.FW.Functions.GetPlayer(o))return;const c=r(e);c&&await(0,a.HasPlayerBusinessPermission)(c.BusinessName,o,"ChargeExternal")&&n.exp.ghmattimysql.executeSync("UPDATE `server_vehicles` SET `preset` = ? WHERE `shop` = ? AND `vehicle` = ?",[JSON.stringify(s),e,t])}))},483:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FW=void 0;const r=s(586);t.FW=r.exp["fw-core"].GetCoreObject();const o=a(s(585)),c=a(s(611));(0,c.default)(),setImmediate((()=>{(0,o.default)()})),t.FW.Functions.CreateCallback("fw-businesses:Server:PayExternal",(async(e,s,n,i,a,o)=>{const l=t.FW.Functions.GetPlayer(e);if(!l)return;const u=await(0,c.GetBusinessByName)(n);if(!u)return s({Success:!1,Msg:"Ongeldige bedrijf."});if(!(0,c.HasPlayerBusinessPermission)(n,e,"PayExternal"))return s({Success:!1,Msg:"Geen toegang."});if(!u.business_account)return s({Success:!1,Msg:"Geen bankrekening gekoppeld aan bedrijf."});const y=await r.exp.ghmattimysql.executeSync("SELECT `citizenid`, `charinfo` FROM `players` WHERE `citizenid` = ?",[i]);if(!y[0])return s({Success:!1,Msg:"Ongeldige speler."});const f=JSON.parse(y[0].charinfo);if(await r.exp["fw-financials"].RemoveMoneyFromAccount(i,f.account,u.business_account,Number(a),"PAY",`Pay External: ${o||"Geen commentaar."}`,!1))return r.exp["fw-financials"].AddMoneyToAccount(i,l.PlayerData.charinfo.account,f.account,Number(a),"PAY",`Pay External: ${o||"Geen commentaar."}`),s({Success:!0});s({Success:!1,Msg:"Niet genoeg balans op bedrijfsrekening."})})),t.FW.Functions.CreateCallback("fw-businesses:Server:ChargeCustomer",(async(e,s,n,i,a,o)=>{if(!t.FW.Functions.GetPlayer(e))return;const l=await(0,c.GetBusinessByName)(n);if(!l)return s({Success:!1,Msg:"Ongeldige bedrijf."});if(!(0,c.HasPlayerBusinessPermission)(n,e,"ChargeExternal"))return s({Success:!1,Msg:"Geen toegang."});if(!l.business_account)return s({Success:!1,Msg:"Geen bankrekening gekoppeld aan bedrijf."});const u=t.FW.Functions.GetPlayerByCitizenId(i);if(!u)return s({Success:!1,Msg:"Ongeldige speler."});const y=t.FW.Shared.CalculateTax("Services",Number(a));emitNet("fw-phone:Client:Notification",u.PlayerData.source,`charge-customer-${i}`,"fas fa-donate",["white","rgb(38, 50, 56)"],"Zakelijke Facturatie",`${(0,r.NumberWithCommas)(Number(y))} - ${n} - ${o||"Geen commentaar."}`,!1,!0,"fw-businesses:Server:AcceptCharge","fw-businesses:Server:RejectCharge",{Id:`charge-customer-${i}`,Account:l.business_account,Cid:i,Charger:e,Business:n,Amount:Number(a),Comment:o||"Geen commentaar."}),s({Success:!0})})),t.FW.Functions.CreateCallback("fw-businesses:Server:GetClockedInEmployees",((e,s,n)=>{let i=[];for(const[s,a]of Object.entries(o.ClockedPlayers))if(a.ClockedIn&&a.Business==n){const s=t.FW.Functions.GetPlayer(e);s&&i.push({Cid:s.PlayerData.citizenid,Name:`${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname}`,TimeClockedIn:GetGameTimer()-a.ClockInTime})}s(i)})),onNet("fw-businesses:Server:AcceptCharge",(async e=>{const s=source,n=t.FW.Functions.GetPlayer(s);if(!n)return;const i=t.FW.Functions.GetPlayer(e.Charger);if(!i)return;const a=t.FW.Shared.CalculateTax("Services",e.Amount);await r.exp["fw-financials"].RemoveMoneyFromAccount(i.PlayerData.citizenid,e.Account,n.PlayerData.charinfo.account,a,"PURCHASE",`Betaling zakelijke dienstverlening: ${e.Comment}`,!1)?(r.exp["fw-financials"].AddMoneyToAccount(n.PlayerData.citizenid,n.PlayerData.charinfo.account,e.Account,e.Amount,"PURCHASE",`Betaling zakelijke dienstverlening: ${e.Comment}`),emitNet("fw-phone:Client:Notification",e.Charger,`business-charge-${e.Cid}`,"fas fa-home",["white","rgb(38, 50, 56)"],"Zakelijke Facturatie","Betaling Voltooid!"),emitNet("fw-phone:Client:UpdateNotification",s,e.Id,!0,!0,!1,"Betaling Voltooid!",!0),r.exp["fw-financials"].AddMoneyToAccount("1001","1","1",a-e.Amount,"TAX",`${e.Business} facturatie betaald: ${e.Comment}`)):(emitNet("fw-phone:Client:Notification",e.Charger,`business-charge-${e.Cid}`,"fas fa-home",["white","rgb(38, 50, 56)"],"Zakelijke Facturatie","Betaling Geweigerd!"),emitNet("fw-phone:Client:UpdateNotification",s,e.Id,!0,!0,!1,"Betaling Geweigerd!",!0))})),onNet("fw-businesses:Server:RejectCharge",(e=>{const t=source;emitNet("fw-phone:Client:Notification",e.Charger,`business-charge-${e.Cid}`,"fas fa-home",["white","rgb(38, 50, 56)"],"Zakelijke Facturatie","Betaling Geweigerd!"),emitNet("fw-phone:Client:UpdateNotification",t,e.Id,!0,!0,!1,"Betaling Geweigerd!",!0)})),onNet("fw-businesses:Server:CreateBusiness",(async e=>{const s=source,n=t.FW.Functions.GetPlayer(s);n&&("judge"!=n.PlayerData.job.name&&"mayor"!=n.PlayerData.job.name||(await r.exp.ghmattimysql.executeSync("INSERT INTO `phone_businesses` (`business_owner`, `business_name`, `business_account`) VALUES (?, ?, ?)",[e.BusinessOwner,e.BusinessName,e.BusinessAccount]),n.Functions.Notify(`Bedrijf [${e.BusinessName}] successvol aangemaakt!`,"success")))}))},611:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsClockedIn=t.HasPlayerBusinessPermission=t.GetBusinessOwner=t.GetBusinessByName=t.GetBusinessAccount=t.GetPlayerNameByCid=void 0;const n=s(586),i=s(585),a=s(483);t.GetPlayerNameByCid=async e=>{const t=a.FW.Functions.GetPlayerByCitizenId(e);if(t)return`${t.PlayerData.charinfo.firstname} ${t.PlayerData.charinfo.lastname}`;const s=await n.exp.ghmattimysql.executeSync("SELECT `charinfo` FROM `players` WHERE `citizenid` = ?",[e]);if(!s[0])return"";const i=JSON.parse(s[0].charinfo);return`${i.firstname} ${i.lastname}`},t.GetBusinessAccount=async e=>{const t=await n.exp.ghmattimysql.executeSync("SELECT `business_account` FROM `phone_businesses` WHERE `business_name` = ?",[e]);return t[0]?t[0].business_account:0},t.GetBusinessByName=async e=>{const t=await n.exp.ghmattimysql.executeSync("SELECT * FROM `phone_businesses` WHERE `business_name` = ?",[e]);return!!t[0]&&t[0]},t.GetBusinessOwner=async e=>{var t;const s=await n.exp.ghmattimysql.executeSync("SELECT `business_owner` FROM `phone_businesses` WHERE `business_name` = ?",[e]);return!!s[0]&&(null===(t=s[0])||void 0===t?void 0:t.business_owner)},t.HasPlayerBusinessPermission=async(e,s,n)=>{const i=a.FW.Functions.GetPlayer(s);if(!i)return!1;const r=await(0,t.GetBusinessByName)(e);if(!r)return!1;if(r.business_owner==i.PlayerData.citizenid)return!0;const o=JSON.parse(r.business_employees),c=JSON.parse(r.business_ranks);for(let e=0;e<o.length;e++){const t=o[e];if(t.Cid!=i.PlayerData.citizenid)continue;const s=c.find((e=>e.Name==t.Role));if(!s)return!1;if(s.Perms[n])return!0}return!1},t.IsClockedIn=(e,t)=>!!i.ClockedPlayers[e]&&i.ClockedPlayers[e].ClockedIn&&i.ClockedPlayers[e].Business==t,t.default=()=>{(0,n.exp)("GetBusinessAccount",t.GetBusinessAccount),(0,n.exp)("HasPlayerBusinessPermission",t.HasPlayerBusinessPermission),(0,n.exp)("GetBusinessOwner",t.GetBusinessOwner)}},586:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumberWithCommas=t.Round=t.RegisterNUICallback=t.SetUIFocus=t.SendUIMessage=t.GetRandom=t.Delay=t.exp=void 0,t.exp=s.g.exports,t.Delay=e=>new Promise((t=>setTimeout(t,e))),t.GetRandom=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,t.SendUIMessage=IsDuplicityVersion()?()=>console.warn("SendUIMessage does exist on server."):(e,s,n)=>{t.exp["fw-ui"].SendUIMessage(e,s,n)},t.SetUIFocus=IsDuplicityVersion()?()=>console.warn("SetUIFocus does exist on server."):(e,s)=>{t.exp["fw-ui"].SetUIFocus(e,s)},t.RegisterNUICallback=IsDuplicityVersion()?()=>console.log("RegisterNUICallback can't be used on server."):(e,t)=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,t)},t.Round=(e,t)=>t?Math.floor(e*10**t+.5)/10**t:Math.floor(e+.5),t.NumberWithCommas=e=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(e),(0,t.exp)("NumberWithCommas",t.NumberWithCommas)}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s(483)})();