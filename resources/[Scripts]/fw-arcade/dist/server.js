(()=>{"use strict";var e={956:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TDM=t.Maps=void 0;const r=a(586),n=a(625),i=a(625),o=a(840),s=a(483),c={},l={};t.Maps=[{Name:"Legion Square"},{Name:"Alta Construction"},{Name:"Cayo Perico"},{Name:"De Bario"}],onNet("fw-arcade:Server:TDM:GiveLoadout",(async e=>{const t=s.FW.Functions.GetPlayer(source);if(!t)return;if(!(0,o.IsCidInLobby)("tdm",e.Id,t.PlayerData.citizenid))return void console.log("USER TRIED TO GET TDM LOADOUT, BUT IS NOT IN A MATCH!");const{AmmoType:a}=r.exp["fw-weapons"].GetWeaponList(GetHashKey(e.Weapon));if(!a)return;let n;switch(await t.Functions.AddItem(e.Weapon,1,!1,{Serial:`arcadetdm-${e.Id}-${t.PlayerData.citizenid}`,Ammo:"AMMO_FIRE"==a?1:100},!0,!1),a){case"AMMO_RIFLE":n="Rifle";break;case"AMMO_PISTOL":n="Pistol";break;case"AMMO_SHOTGUN":n="Shotgun";break;case"AMMO_REVOLVER":n="Revolver";break;case"AMMO_SMG":n="Smg"}l[t.PlayerData.citizenid]||(l[t.PlayerData.citizenid]=[]),l[t.PlayerData.citizenid].push({Weapon:e.Weapon,Ammo:n}),n&&t.Functions.AddItem("ammo",5,!1,{arcadeId:`arcadetdm-${e.Id}`},!0,n)})),onNet("fw-arcade:Server:TDM:RemoveLoadout",(async()=>{const e=s.FW.Functions.GetPlayer(source);if(!e)return;const{Game:t,Id:a}=i.sourceToLobby[e.PlayerData.source];(0,n.GetLobby)(t,a)&&(l[e.PlayerData.citizenid]=[],await r.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `inventory` = ? AND `info` LIKE ?",[`ply-${e.PlayerData.citizenid}`,`%arcadetdm-${a}%`]),await r.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `inventory` = ? AND `item_name` = 'ammo' AND `info` LIKE ?",[`ply-${e.PlayerData.citizenid}`,`%arcadetdm-${a}%`]),await(0,r.Delay)(50),e.Functions.RefreshInventory(),e.Functions.Notify("Loadout verwijderd."))})),onNet("fw-arcade:Server:TDM:UpdateKillCounters",(async e=>{var a,o;if(0==e)return;const l=s.FW.Functions.GetPlayer(source);if(!l)return;const{Game:y,Id:d}=i.sourceToLobby[l.PlayerData.source],u=(0,n.GetLobby)(y,d);if(!u)return;const f=(null===(a=u.Players.find((t=>t.Source==e)))||void 0===a?void 0:a.Team)||1;f==((null===(o=u.Players.find((e=>e.Source==l.PlayerData.source)))||void 0===o?void 0:o.Team)||1)?1==f?(c[u.Id].TeamOnePoints-=2,c[u.Id].TeamOnePoints<=0&&(c[u.Id].TeamOnePoints=0)):(c[u.Id].TeamTwoPoints-=2,c[u.Id].TeamTwoPoints<=0&&(c[u.Id].TeamTwoPoints=0)):1==f?c[u.Id].TeamOnePoints+=1:c[u.Id].TeamTwoPoints+=1,emitNet("fw-arcade:Client:KillFeed",e,u.Id),u.TriggerEvent("fw-arcade:Client:TDM:UpdateCounter",c[u.Id]),await(0,r.Delay)(10),c[u.Id].TeamOnePoints>=u.Settings.Points?t.TDM.UnloadGame(d,1):c[u.Id].TeamTwoPoints>=u.Settings.Points&&t.TDM.UnloadGame(d,2)})),onNet("fw-arcade:Server:TDM:RestockAmmo",(async()=>{const e=s.FW.Functions.GetPlayer(source);if(!e)return;const{Game:t,Id:a}=i.sourceToLobby[e.PlayerData.source],o=(0,n.GetLobby)(t,a);if(o&&o.InMatch){await r.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `inventory` = ? AND `info` LIKE ?",[`ply-${e.PlayerData.citizenid}`,`%arcadetdm-${a}%`]),await r.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `inventory` = ? AND `item_name` = 'ammo' AND `info` LIKE ?",[`ply-${e.PlayerData.citizenid}`,`%arcadetdm-${a}%`]),await(0,r.Delay)(100),e.Functions.RefreshInventory(),await(0,r.Delay)(100);for(let t=0;t<l[e.PlayerData.citizenid].length;t++){const{Weapon:n,Ammo:i}=l[e.PlayerData.citizenid][t];await e.Functions.AddItem(n,1,!1,{Serial:`arcadetdm-${a}-${e.PlayerData.citizenid}`,Ammo:i?100:1},!0,!1),await(0,r.Delay)(150),i&&await e.Functions.AddItem("ammo",5,!1,{arcadeId:`arcadetdm-${a}`},!0,i),await(0,r.Delay)(150)}}})),t.TDM={SetupGame:e=>{const a=(0,n.GetLobby)("tdm",e);if(a){c[e]={TeamOnePoints:0,TeamTwoPoints:0};for(let e=0;e<a.Players.length;e++){const{Source:t}=a.Players[e];l[t]=[]}a.TriggerEvent("fw-arcade:Client:TDM:LoadGame",{Map:"Random Map"==a.Settings.Map?t.Maps[(0,r.GetRandom)(0,t.Maps.length-1)].Name:a.Settings.Map}),a.TriggerEvent("fw-arcade:Client:TDM:UpdateCounter",c[e])}},UnloadGame:async(e,t)=>{const a=(0,n.GetLobby)("tdm",e);if(a){a.InMatch=!1,a.TriggerEvent("fw-arcade:Client:SetGameActive",{State:!1}),a.TriggerEvent("fw-arcade:Client:TDM:UnloadGame"),await r.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `info` LIKE ?",[`%arcadetdm-${e}-%`]),await r.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `item_name` = 'ammo' AND `info` LIKE ?",[`%arcadetdm-${e}%`]),await(0,r.Delay)(100);for(let e=0;e<a.Spectators.length;e++){const{Source:t}=a.Spectators[e];(0,n.ClearPlayerBucket)(t)}for(let e=0;e<a.Players.length;e++){const{Source:r,Team:i}=a.Players[e];(0,n.ClearPlayerBucket)(r),l[r]=[];const o=s.FW.Functions.GetPlayer(r);o&&o.Functions.RefreshInventory(),emitNet("fw-assets:Client:Toggle:Items",r,!1,!1),setTimeout((()=>{emitNet("fw-assets:Client:Toggle:Items",r,!0,!1)}),500),t&&emitNet("FW:Notify",r,i==t?"Je team heeft gewonnen! Gefeliciteerd!":"Je team heeft verloren.. Volgende keer beter!",i==t?"success":"error")}}}}},726:function(e,t,a){var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,n)}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),n=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),n(a(956),t)},343:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VehicleTag=void 0;const r=a(625),n=a(163),i=a(483),o=a(180),s=a(586),c=a(840),l={},y={};t.default=()=>{i.FW.Functions.CreateCallback("fw-arcade:Server:VTag:StealTag",((e,t,a)=>{const n=i.FW.Functions.GetPlayer(e);if(!n)return t(!1);const{Game:s,Id:y}=r.sourceToLobby[e];if("vehicleTag"!=s||y!=a||l[y].TagCooldown)return t(!1);const d=(0,r.GetLobby)(s,y);if(!d)return t(!1);const u=GetVehiclePedIsIn(GetPlayerPed(e.toString()),!1),f=GetEntityCoords(u),m=GetEntityCoords(GetVehiclePedIsIn(GetPlayerPed(d.Players[l[a].TagHolder[1]].Source.toString()),!1));if((new o.Vector3).setFromArray(f).getDistanceFromArray(m)>5)return t(!1);const h=d.Players.findIndex((e=>e.Cid==n.PlayerData.citizenid));if(-1==h)return t(!1);l[y].TagCooldown=!0,l[y].TagHolder=[d.Players[h].Team,h],t(!0),(0,c.SendLobbyNotify)(s,y,`${n.PlayerData.charinfo.firstname} ${n.PlayerData.charinfo.lastname} heeft de tag overgenomen!`),setTimeout((()=>{l[y].TagCooldown=!1}),5e3)})),i.FW.Functions.CreateCallback("fw-arcade:Server:VTag:SpawnVehicle",(async(e,t,a,n,o)=>{if(!i.FW.Functions.GetPlayer(e))return t(!1);const{Game:c,Id:l}=r.sourceToLobby[e],d=(0,r.GetLobby)(c,l);if(!d)return t(!1);const u=await i.FW.Functions.SpawnVehicle(e,a,{x:n.x,y:n.y,z:n.z,a:n.w},!1,o),f=NetworkGetEntityFromNetworkId(u);for(;!DoesEntityExist(f);)await(0,s.Delay)(25);y[d.Id]||(y[d.Id]=[]),y[d.Id].push({Source:e,NetId:u});const m=d.Players.find((t=>t.Source==e));if(!m)return t(!1);SetVehicleColours(f,1==m.Team?0:135,1==m.Team?0:135),SetVehicleNumberPlateText(f,o),y[d.Id].length==d.Players.length&&d.TriggerEvent("fw-arcade:Client:VTag:Ready"),t(u)})),i.FW.RegisterServer("fw-arcade:Server:VTag:RouletteTag",((e,a)=>{i.FW.Functions.GetPlayer(e)&&t.VehicleTag.RouletteTag(a)}))},t.VehicleTag={SetupGame:e=>{const a=(0,r.GetLobby)("vehicleTag",e);if(!a)return;a.TriggerEvent("fw-arcade:Client:VTag:LoadGame",{Map:a.Settings.Map,Vehicles:a.Settings.Vehicles});const i=n.Maps.find((e=>e.Name==a.Settings.Map))||n.Maps[0],o=setInterval((()=>{const r=l[e].TagHolder[0]-1;if(!a.Players[l[e].TagHolder[1]])return;const n=GetEntityCoords(GetPlayerPed(a.Players[l[e].TagHolder[1]].Source.toString()));i.Coords.getDistanceFromArray(n)<i.Radius?l[e].Points[r]+=1:l[e].Points[r]>0&&(l[e].Points[r]-=1),a.TriggerEvent("fw-arcade:Client:VTag:UpdateInfo",{Timer:l[e].Timer,Points:l[e].Points,TagHolder:l[e].TagHolder,PointsGoal:a.Settings.Points}),l[e].Timer-=1,l[e].Timer<=0?t.VehicleTag.UnloadGame(e,0):l[e].Points[r]>=a.Settings.Points&&t.VehicleTag.UnloadGame(e,r+1)}),1e3);l[e]={Points:[0,0],Timer:60*a.Settings.Time,TagHolder:[2,a.Players.findIndex((e=>2==e.Team))],TagCooldown:!1,TimerInterval:o}},UnloadGame:(e,t)=>{const a=(0,r.GetLobby)("vehicleTag",e);if(a){for(let t=0;t<y[e].length;t++){const{NetId:a}=y[e][t];DeleteEntity(NetworkGetEntityFromNetworkId(a))}y[e]=[],clearInterval(l[e].TimerInterval),delete l[e],a.InMatch=!1,a.TriggerEvent("fw-arcade:Client:SetGameActive",{State:!1}),a.TriggerEvent("fw-arcade:Client:VTag:UnloadGame"),setTimeout((()=>{for(let e=0;e<a.Spectators.length;e++){const{Source:t}=a.Spectators[e];(0,r.ClearPlayerBucket)(t)}for(let e=0;e<a.Players.length;e++){const{Source:n,Team:i}=a.Players[e];(0,r.ClearPlayerBucket)(n),0!=t&&emitNet("FW:Notify",n,i==t?"Je team heeft gewonnen! Gefeliciteerd!":"Je team heeft verloren.. Volgende keer beter!",i==t?"success":"error")}}),750)}},RouletteTag:e=>{const t=(0,r.GetLobby)("vehicleTag",e);if(!t)return;let[a,n]=l[e].TagHolder;a=1==a?2:1;const i=t.Players.filter((e=>e.Team==a)),o=t.Players.findIndex((e=>{var r;return e.Team==a&&(1==i.length||e.Source!=((null===(r=t.Players[n])||void 0===r?void 0:r.Source)||0))}));l[e].TagHolder=[a,o]},DeleteVehicle:(e,t)=>{const{NetId:a}=y[e].find((e=>e.Source==t))||{NetId:0};0!=a&&DeleteEntity(NetworkGetEntityFromNetworkId(a))}}},442:function(e,t,a){var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,n)}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),n=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(a(343),t);const o=i(a(343));setImmediate((()=>{(0,o.default)()}))},625:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClearPlayerBucket=t.SetPlayerInLobbyBucket=t.GetLobby=t.sourceToLobby=void 0;const r=a(483),n=a(840),i=a(180),o=a(586),s=a(726),c=a(442);let l=0;t.sourceToLobby={};const y={};t.default=()=>{r.FW.RegisterServer("fw-arcade:Server:CreateLobby",(async(e,a,i)=>{const s=r.FW.Functions.GetPlayer(e);if(!s)return s.Functions.Notify("Lobby niet aangemaakt!","error");const{arcadeMachines:c}=await o.exp["fw-config"].GetModuleConfig("bus-arcade",{arcadeMachines:{}});if(null==c[a]||c[a]<=(0,o.GetRandom)(1,10)-1)return s.Functions.Notify("Kan de lobby niet starten, de arcadekast is kapot..","error");null==y[a]&&(y[a]=[]),l+=1;const d={Id:l,Matchmaker:s.PlayerData.citizenid,Players:[{Cid:s.PlayerData.citizenid,Source:s.PlayerData.source,Name:`${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname}`,Team:1}],Spectators:[],Password:i.Password,Name:i.Name,Sessions:3,Settings:i,MaxPlayers:await o.exp["fw-businesses"].HasPlayerBusinessPermission("Coopers Arcade",e,"VehicleSales")?36:12,InMatch:!1,TriggerEvent:(e,t)=>{(0,n.TriggerLobbyEvent)(a,d.Id,e,t)}};y[a].push(d),t.sourceToLobby[e]={Game:a,Id:d.Id},s.Functions.Notify("Lobby aangemaakt!"),emitNet("fw-arcade:Client:SetCurrentLobby",e,a,d.Id),emitNet("fw-arcade:Client:OpenLobbyMenu",e,{Game:a})})),r.FW.RegisterServer("fw-arcade:Server:JoinLobby",((e,a,i,o)=>{const s=r.FW.Functions.GetPlayer(e);if(!s)return;const c=(0,t.GetLobby)(a,i);if(!c)return s.Functions.Notify("Lobby bestaat niet..","error");if(c.Password!=o)return s.Functions.Notify("Wachtwoord klopt niet..","error");const l=d(c.Players);(0,n.SendLobbyNotify)(a,i,`${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname} heeft de lobby gejoined!`),t.sourceToLobby[e]={Game:a,Id:i},c.Players.push({Cid:s.PlayerData.citizenid,Source:s.PlayerData.source,Name:`${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname}`,Team:l}),s.Functions.Notify("Je bent een lobby gejoined."),emitNet("fw-arcade:Client:SetCurrentLobby",e,a,c.Id)})),r.FW.RegisterServer("fw-arcade:Server:JoinSpectator",(async(e,a,n)=>{const i=r.FW.Functions.GetPlayer(e);if(!i)return;const s=(0,t.GetLobby)(a,n);if(!s)return i.Functions.Notify("Lobby bestaat niet..","error");if(await o.exp["fw-businesses"].HasPlayerBusinessPermission("Coopers Arcade",e,"VehicleSales")){if(t.sourceToLobby[e])return i.Functions.Notify("Je zit al in een lobby!");t.sourceToLobby[e]={Game:a,Id:n},s.Spectators.push({Cid:i.PlayerData.citizenid,Source:i.PlayerData.source}),i.Functions.Notify("Je bent een lobby gejoined als spectator.."),emitNet("fw-arcade:Client:SetCurrentLobby",e,a,s.Id)}})),r.FW.RegisterServer("fw-arcade:Server:SendInvitation",((e,a,o,s)=>{const c=r.FW.Functions.GetPlayer(e);if(!c)return;if(!(0,t.GetLobby)(a,o))return c.Functions.Notify("Lobby bestaat niet..","error");if((0,n.IsCidInAnyLobby)(s))return c.Functions.Notify("Speler zit al in een lobby!");const l=r.FW.Functions.GetPlayerByCitizenId(s);if(!l)return;const y=GetEntityCoords(GetPlayerPed(l.PlayerData.source));if(new i.Vector3(-1654.12,-1070.66,12.16).getDistanceFromArray(y)>100)return c.Functions.Notify("Speler is niet bij de arcade..","error");emitNet("fw-phone:Client:Notification",l.PlayerData.source,`arcade-invite-${a}:${o}`,"fas fa-gamepad",["white","rgb(38, 50, 56)"],"Arcade Invite",`${c.PlayerData.charinfo.firstname} ${c.PlayerData.charinfo.lastname} heeft je uitgenodigd voor een lobby.`,!1,!0,"fw-arcade:Server:AcceptInvitation","fw-phone:Client:RemoveNotificationById",{Id:`arcade-invite-${a}:${o}`,Game:a,LobbyId:o})})),r.FW.RegisterServer("fw-arcade:Server:SaveLobbySettings",((e,a,n,i)=>{const o=r.FW.Functions.GetPlayer(e);if(!o)return;const s=(0,t.GetLobby)(a,n);if(!s)return o.Functions.Notify("Lobby bestaat niet..","error");s.Matchmaker==o.PlayerData.citizenid&&(s.Settings=i)})),r.FW.RegisterServer("fw-arcade:Server:EndGame",((e,a,n)=>{const i=r.FW.Functions.GetPlayer(e);if(!i)return;const o=(0,t.GetLobby)(a,n);if(!o)return i.Functions.Notify("Lobby bestaat niet..","error");o.Matchmaker==i.PlayerData.citizenid&&(o.InMatch=!1,o.TriggerEvent("fw-arcade:Client:SetGameActive",{State:!1}),"tdm"==a?s.TDM.UnloadGame(n,!1):"vehicleTag"==a&&c.VehicleTag.UnloadGame(n,!1))})),r.FW.Functions.CreateCallback("fw-arcade:Server:GetGameLobbys",((e,t,a)=>{if(null==y[a])return t([]);t(y[a])})),r.FW.Functions.CreateCallback("fw-arcade:Server:GetLobby",((e,a,r,n)=>{a((0,t.GetLobby)(r,n))})),r.FW.Functions.CreateCallback("fw-arcade:Server:IsMatchmaker",((e,a,n,i)=>{const o=r.FW.Functions.GetPlayer(e);if(!o)return;const s=(0,t.GetLobby)(n,i);if(!s)return a(!1);a(s.Matchmaker==o.PlayerData.citizenid)})),r.FW.Functions.CreateCallback("fw-arcade:Server:CanLobbyStart",(async(e,a,l,y)=>{const d=r.FW.Functions.GetPlayer(e);if(!d)return a({Success:!1,Msg:"Lobby kan niet gestart worden.."});const u=(0,t.GetLobby)(l,y);if(!u)return a({Success:!1,Msg:"Lobby bestaat niet.."});if(u.Matchmaker!=d.PlayerData.citizenid)return a({Success:!1,Msg:"Alleen de Matchmaker kan de lobby starten.."});const{arcadeMachines:f,arcadeStats:m}=await o.exp["fw-config"].GetModuleConfig("bus-arcade",{arcadeMachines:{}});if(null==f[l]||f[l]<=(0,o.GetRandom)(1,10)-1)return a({Success:!1,Msg:"Kan de lobby niet starten, de arcadekast is kapot.."});let h=[];const b=new i.Vector3(-1654.12,-1070.66,12.16);for(let e=0;e<u.Players.length;e++){const{Name:t,Source:a}=u.Players[e],r=GetEntityCoords(GetPlayerPed(a));(!GetPlayerName(a)||b.getDistanceFromArray(r)>35)&&(h.push(a),(0,n.SendLobbyNotify)(l,y,`${t} is uit de lobby gekickt.`))}if(u.Players=u.Players.filter((e=>!h.includes(e.Source))),u.Players.filter((e=>1==e.Team)).length<=0||u.Players.filter((e=>2==e.Team)).length<=0)return a({Success:!1,Msg:"Er moet minimaal 1 persoon in elk team zitten!"});const g=await o.exp["fw-inventory"].GetInventoryItemsUnproccessed(`arcade-tokens-${l}-${y}`);if(!g)return a({Success:!1,Msg:"Iemand heeft geen geldige Arcade Token ingeleverd.."});if(0!=u.Players.filter((e=>!g.some((({info:t})=>{const{purchaser:a,games:r}=JSON.parse(t);return a==e.Cid&&r>0})))).length)return a({Success:!1,Msg:"Iemand heeft geen geldige Arcade Token ingeleverd.."});for(let e=0;e<g.length;e++){const t=JSON.parse(g[e].info);t.games-1>0?o.exp.ghmattimysql.executeSync("UPDATE `player_inventories` SET `info` = ? WHERE `id` = ?",[JSON.stringify({...t,games:t.games-1}),g[e].id]):o.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `id` = ?",[g[e].id])}u.InMatch=!0,u.TriggerEvent("fw-arcade:Client:StartLobby",{Game:l,Id:y}),setTimeout((()=>{const e=[...u.Players,...u.Spectators];for(let a=0;a<e.length;a++){const{Source:r}=e[a];(0,t.SetPlayerInLobbyBucket)(r,u.Id)}u.TriggerEvent("fw-arcade:Client:SetGameActive",{State:!0})}),4e3),setTimeout((()=>{"vehicleTag"==l?c.VehicleTag.SetupGame(y):"tdm"==l&&s.TDM.SetupGame(y)}),5e3),m[l].totalPlays+=1,o.exp["fw-config"].SetConfigValue("bus-arcade","arcadeStats",m),await(0,o.Delay)(1),(0,n.DegradeArcadeMachine)(l,.1*u.Players.length),a({Success:!0})}))},t.GetLobby=(e,t)=>null!=y[e]&&(y[e].find((e=>e.Id==t))||!1),t.SetPlayerInLobbyBucket=(e,t)=>{SetRoutingBucketPopulationEnabled(t,!1),SetPlayerRoutingBucket(e.toString(),t)},t.ClearPlayerBucket=e=>{SetPlayerRoutingBucket(e.toString(),0)};const d=e=>{const t=e.filter((e=>1===e.Team)).length,a=e.filter((e=>2===e.Team)).length;return t===a||a<t?2:1};onNet("fw-arcade:Server:AcceptInvitation",(async e=>{const a=source,i=r.FW.Functions.GetPlayer(a);if(!i)return emitNet("fw-phone:Client:UpdateNotification",a,e.Id,!0,!0,!1,"Ongeldige invite...",!0);const o=(0,t.GetLobby)(e.Game,e.LobbyId);if(!o)return emitNet("fw-phone:Client:UpdateNotification",a,e.Id,!0,!0,!1,"Ongeldige invite...",!0);emitNet("fw-phone:Client:UpdateNotification",a,e.Id,!0,!0,!1,"Invite geaccepteerd!",!0);const s=d(o.Players);(0,n.SendLobbyNotify)(e.Game,e.LobbyId,`${i.PlayerData.charinfo.firstname} ${i.PlayerData.charinfo.lastname} heeft de lobby gejoined!`),t.sourceToLobby[a]={Game:e.Game,Id:e.LobbyId},o.Players.push({Cid:i.PlayerData.citizenid,Source:i.PlayerData.source,Name:`${i.PlayerData.charinfo.firstname} ${i.PlayerData.charinfo.lastname}`,Team:s}),i.Functions.Notify("Je bent een lobby gejoined."),emitNet("fw-arcade:Client:SetCurrentLobby",a,e.Game,o.Id)})),onNet("fw-arcade:Server:SwapTeam",(async({Game:e,Id:a,TeamId:n,Cid:i})=>{const o=source,s=r.FW.Functions.GetPlayer(o);if(!s)return;const c=(0,t.GetLobby)(e,a);if(!c)return;const l=c.Players.findIndex((e=>e.Cid==(i||s.PlayerData.citizenid)));-1!=l&&(c.Players[l].Team=i?1==n?2:1:n,emitNet("fw-arcade:Client:ViewLobbyTeam",o,{Game:e,Id:a,TeamId:n}))})),onNet("fw-arcade:Server:LeaveLobby",(async({Game:e,Id:a})=>{const i=source,s=r.FW.Functions.GetPlayer(i);if(!s)return;const c=(0,t.GetLobby)(e,a);if(c){if(c.Matchmaker==s.PlayerData.citizenid){if(0!=(await o.exp["fw-inventory"].GetInventoryItemsUnproccessed(`arcade-tokens-${e}-${a}`)).length)return s.Functions.Notify("Er zitten nog arcade tokens in de kast!","error");const r=y[e].findIndex((e=>e.Id==a));if(-1==r)return;(0,n.SendLobbyNotify)(e,a,`${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname} heeft de lobby verwijderd!`);for(let e=0;e<c.Players.length;e++){const{Source:a}=c.Players[e];emitNet("fw-arcade:Client:SetCurrentLobby",a,!1,0),delete t.sourceToLobby[a]}y[e].splice(r,1)}else c.Players=c.Players.filter((e=>e.Cid!=s.PlayerData.citizenid)),(0,n.SendLobbyNotify)(e,a,`${s.PlayerData.charinfo.firstname} ${s.PlayerData.charinfo.lastname} heeft de lobby verlaten!`),emitNet("fw-arcade:Client:SetCurrentLobby",i,!1,0);delete t.sourceToLobby[i]}})),on("playerDropped",(async e=>{const a=source,i=r.FW.Functions.GetPlayer(a);if(!i)return;if(!t.sourceToLobby[a])return;const{Game:l,Id:d}=t.sourceToLobby[a],u=(0,t.GetLobby)(l,d);if(u)if("tdm"==l?(await o.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `inventory` = ? AND `info` LIKE ?",[`ply-${i.PlayerData.citizenid}`,"%arcadetdm%"]),await o.exp.ghmattimysql.executeSync("DELETE FROM `player_inventories` WHERE `inventory` = ? AND `item_name` = 'ammo' AND `info` LIKE ?",[`ply-${i.PlayerData.citizenid}`,"%arcadetdm%"])):"vehicleTag"==l&&(c.VehicleTag.RouletteTag(d),c.VehicleTag.DeleteVehicle(d,a)),delete t.sourceToLobby[a],u.Matchmaker==i.PlayerData.citizenid){const e=y[l].findIndex((e=>e.Id==d));if(-1==e)return;(0,n.SendLobbyNotify)(l,d,`${i.PlayerData.charinfo.firstname} ${i.PlayerData.charinfo.lastname} heeft de lobby verwijderd!`);for(let e=0;e<u.Players.length;e++){const{Source:a}=u.Players[e];emitNet("fw-arcade:Client:SetCurrentLobby",a,!1,0),delete t.sourceToLobby[a]}"tdm"==l?s.TDM.UnloadGame(d,!1):c.VehicleTag.UnloadGame(d,0),y[l].splice(e,1)}else u.Players=u.Players.filter((e=>e.Cid!=i.PlayerData.citizenid)),(0,n.SendLobbyNotify)(l,d,`${i.PlayerData.charinfo.firstname} ${i.PlayerData.charinfo.lastname} heeft de lobby verlaten!`)}))},840:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DegradeArcadeMachine=t.TriggerLobbyEvent=t.SendLobbyNotify=t.IsCidInLobby=t.IsCidInAnyLobby=void 0;const r=a(586),n=a(483),i=a(625);t.IsCidInAnyLobby=e=>{const t=n.FW.Functions.GetPlayerByCitizenId(e);return!t||!!i.sourceToLobby[t.PlayerData.source]},t.IsCidInLobby=(e,t,a)=>{const r=(0,i.GetLobby)(e,t);return!!r&&(-1!=r.Players.findIndex((e=>e.Cid==a))||-1!=r.Spectators.findIndex((e=>e.Cid==a)))},t.SendLobbyNotify=(e,t,a)=>{const r=(0,i.GetLobby)(e,t);if(!r)return;const n=[...r.Players,...r.Spectators];for(let e=0;e<n.length;e++){const{Source:t,Cid:r}=n[e];emitNet("FW:Notify",t,a)}},t.TriggerLobbyEvent=(e,t,a,r)=>{const n=(0,i.GetLobby)(e,t);if(!n)return;const o=[...n.Players,...n.Spectators];for(let n=0;n<o.length;n++){const{Source:i,Cid:s}=o[n];emitNet(a,i,{Game:e,Id:t,...r})}},t.DegradeArcadeMachine=async(e,t)=>{const{arcadeMachines:a}=await r.exp["fw-config"].GetModuleConfig("bus-arcade",{arcadeMachines:{}});if(null==a[e])return console.log(`[ARCADE]: Degradation failed on game '${e}'! No arcade machine found!`);a[e]-=t,a[e]<=0&&(a[e]=0),r.exp["fw-config"].SetConfigValue("bus-arcade","arcadeMachines",a)}},483:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FW=void 0;const n=a(586),i=r(a(625));t.FW=n.exp["fw-core"].GetCoreObject(),setImmediate((()=>{(0,i.default)(),t.FW.RegisterServer("fw-arcade:Server:RepairArcadeMachine",(async(e,a)=>{const r=t.FW.Functions.GetPlayer(e);if(!r)return;if(!await n.exp["fw-businesses"].HasPlayerBusinessPermission("Coopers Arcade",e,"CraftAccess"))return;const{arcadeMachines:i,arcadeStats:o}=await n.exp["fw-config"].GetModuleConfig("bus-arcade",{arcadeMachines:!1,arcadeStats:!1});if(!i||!i[a])return;const s=Math.floor(1200-Math.floor(i[a])/100*1200);return s<=0?r.Functions.Notify("De arcadekast ziet er nog perfect uit!"):r.Functions.HasEnoughOfItem("electronics",s)&&r.Functions.HasEnoughOfItem("plastic",s)?(r.Functions.RemoveItemByName("electronics",s,!0),r.Functions.RemoveItemByName("plastic",s,!0),i[a]=100,o[a].lastRepair=(new Date).getTime(),n.exp["fw-config"].SetConfigValue("bus-arcade","arcadeMachines",i),await(0,n.Delay)(1),n.exp["fw-config"].SetConfigValue("bus-arcade","arcadeStats",o),void r.Functions.Notify("Arcadekast gerepareerd!","success")):r.Functions.Notify("Je hebt niet genoeg materialen op zak..","error")})),t.FW.Functions.CreateCallback("fw-arcade:Server:GetPlayerCharName",(async(e,a,r)=>{a(await t.FW.Functions.GetPlayerCharName(r))}))})),onNet("fw-arcade:Server:PurchaseToken",(async e=>{const a=t.FW.Functions.GetPlayer(source);if(!a)return;if(e.Amount<=0)return a.Functions.Notify("Je moet minimaal 1 token kopen!","error");const r=await n.exp["fw-businesses"].GetBusinessAccount("Coopers Arcade"),i=await n.exp["fw-businesses"].GetBusinessOwner("Coopers Arcade"),{ticketPrice:o}=await n.exp["fw-config"].GetModuleConfig("bus-arcade",{ticketPrice:299});"Cash"==e.Payment&&a.Functions.RemoveMoney("cash",o*e.Amount)||"Card"==e.Payment&&await n.exp["fw-financials"].RemoveMoneyFromAccount(i,r,a.PlayerData.charinfo.account,o*e.Amount,"PURCHASE","Arcade Token gekocht.",!1)?(n.exp["fw-financials"].AddMoneyToAccount(a.PlayerData.citizenid,a.PlayerData.charinfo.account,r,o*e.Amount,"PURCHASE","Betaling zakelijke dienstverlening: Arcade Token gekocht",!1),a.Functions.AddItem("arcadetoken",e.Amount,!1,{purchaser:a.PlayerData.citizenid,games:3},!0,!1)):a.Functions.Notify("Je hebt niet genoeg geld..","error")})),onNet("fw-arcade:Server:RevokeMembership",(()=>{}))},862:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.easeCubicBezier=t.easeInOutQuint=t.easeOutQuint=t.easeInQuint=t.easeInOutQuart=t.easeOutQuart=t.easeInQuart=t.easeInOutCubic=t.easeOutCubic=t.easeInCubic=t.easeInOutQuad=t.easeOutQuad=t.easeInQuad=t.easeInOutSine=t.easeOutSine=t.easeInSine=t.linear=t.lerp=t.clamp=void 0,t.clamp=(e,t,a)=>Math.max(t,Math.min(a,e)),t.lerp=(e,t,a)=>e*(1-a)+t*a,t.linear=e=>(0,t.clamp)(e,0,1),t.easeInSine=e=>1-Math.cos(e*Math.PI/2),t.easeOutSine=e=>Math.sin(e*Math.PI/2),t.easeInOutSine=e=>-(Math.cos(Math.PI*e)-1)/2,t.easeInQuad=e=>(e=(0,t.clamp)(e,0,1))*e,t.easeOutQuad=e=>(e=(0,t.clamp)(e,0,1))*(2-e),t.easeInOutQuad=e=>(e=(0,t.clamp)(e,0,1))<.5?2*e*e:(4-2*e)*e-1,t.easeInCubic=e=>(e=(0,t.clamp)(e,0,1))*e*e,t.easeOutCubic=e=>(e=(0,t.clamp)(e,0,1),--e*e*e+1),t.easeInOutCubic=e=>(e=(0,t.clamp)(e,0,1))<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,t.easeInQuart=e=>(e=(0,t.clamp)(e,0,1))*e*e*e,t.easeOutQuart=e=>(e=(0,t.clamp)(e,0,1),1- --e*e*e*e),t.easeInOutQuart=e=>(e=(0,t.clamp)(e,0,1))<.5?8*e*e*e*e:1-8*--e*e*e*e,t.easeInQuint=e=>(e=(0,t.clamp)(e,0,1))*e*e*e*e,t.easeOutQuint=e=>(e=(0,t.clamp)(e,0,1),1+--e*e*e*e*e),t.easeInOutQuint=e=>(e=(0,t.clamp)(e,0,1))<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,t.easeCubicBezier=(e,t,a,r,n)=>3*e*Math.pow(1-e,2)*t+3*e*e*(1-e)*r+e*e*e},180:function(e,t,a){var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,n)}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),n=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.Degrees=t.Radians=void 0,n(a(862),t),n(a(903),t),t.Radians=e=>e*Math.PI/180,t.Degrees=e=>180*e/Math.PI},903:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector4=t.Vector3=void 0;class a{constructor(e=0,t=0,a=0){this.x=e,this.y=t,this.z=a}setFromArray(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}setFromObject(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}getArray(){return[this.x,this.y,this.z]}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}cross(e){const t=this.x,a=this.y,r=this.z,n=e.x,i=e.y,o=e.z;return this.x=a*o-r*i,this.y=r*n-t*o,this.z=t*i-a*n,this}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let e=this.magnitude();return isNaN(e)&&(e=0),this.multiplyScalar(1/e)}forward(){const e=a.fromObject(this).multiplyScalar(Math.PI/180);return new a(-Math.sin(e.z)*Math.abs(Math.cos(e.x)),Math.cos(e.z)*Math.abs(Math.cos(e.x)),Math.sin(e.x))}right(){const e=a.fromObject(this).multiplyScalar(Math.PI/180);return new a(Math.cos(e.z)*Math.abs(Math.cos(e.y)),Math.sin(e.z)*Math.abs(Math.cos(e.y)),-Math.sin(e.y))}up(){return this.right().cross(this.forward())}up2(){return this.forward().cross(this.right())}angle(e){const t=this.dot(e);return Math.acos(t)*(180/Math.PI)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}getDistance(e){const[t,a,r]=[this.x-e.x,this.y-e.y,this.z-e.z];return Math.sqrt(t*t+a*a+r*r)}getDistanceFromArray(e){const[t,a,r]=[this.x-e[0],this.y-e[1],this.z-e[2]];return Math.sqrt(t*t+a*a+r*r)}getDistance2D(e,t){const[a,r]=[this.x-e,this.y-t];return Math.sqrt(a*a+r*r)}copy(){return a.fromArray(this.getArray())}toObject(){return{x:this.x,y:this.y,z:this.z}}toArray(){return[this.x,this.y,this.z]}static fromArray(e){return new a(e[0],e[1],e[2])}static fromObject(e){return new a(e.x,e.y,e.z)}}t.Vector3=a,t.Vector4=class extends a{constructor(e=0,t=0,a=0,r=0){super(e,t,a),this.w=r}}},163:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Maps=void 0;const r=a(180);t.Maps=[{Name:"The Docks",Coords:new r.Vector3(1034.33,-2997.95,5.22),Spawners:[[{x:1197.37,y:-3030.42,z:5.3,w:88.55},{x:1197.65,y:-3034.37,z:5.3,w:89.49},{x:1197.7,y:-3037.86,z:5.3,w:87.59},{x:1198.07,y:-3041.4,z:5.3,w:90.24},{x:1197.95,y:-3044.65,z:5.3,w:90.98},{x:1197.9,y:-3048.38,z:5.3,w:85.44},{x:1197.9,y:-3048.38,z:5.3,w:85.44},{x:1196.43,y:-3055.36,z:5.3,w:69.31},{x:1194.62,y:-3058.29,z:5.3,w:49.65},{x:1192.26,y:-3060.77,z:5.3,w:38.66},{x:1192.26,y:-3060.77,z:5.3,w:38.66},{x:1186.26,y:-3064.44,z:5.3,w:22.39},{x:1183.14,y:-3065.24,z:5.3,w:6.82},{x:1180.19,y:-3065.65,z:5.3,w:1.86},{x:1177.71,y:-3065.56,z:5.3,w:.85},{x:1175.12,y:-3065.63,z:5.3,w:357.82},{x:1172.47,y:-3065.11,z:5.3,w:358.83},{x:1169.58,y:-3065.17,z:5.3,w:1.45}],[{x:879.82,y:-3055.32,z:5.64,w:270},{x:879.9,y:-3052.26,z:5.63,w:270},{x:880.03,y:-3049.16,z:5.63,w:270},{x:880.05,y:-3046.03,z:5.63,w:270},{x:880.13,y:-3042.9,z:5.63,w:270},{x:880.06,y:-3039.77,z:5.63,w:270},{x:879.94,y:-3036.65,z:5.63,w:270},{x:879.73,y:-3033.45,z:5.63,w:270},{x:879.69,y:-3030.33,z:5.63,w:270},{x:879.73,y:-3027.19,z:5.63,w:270},{x:879.73,y:-3027.19,z:5.63,w:270},{x:879.66,y:-3021.16,z:5.6,w:270},{x:879.83,y:-3017.89,z:5.63,w:270},{x:879.88,y:-3014.69,z:5.63,w:270},{x:879.59,y:-3011.92,z:5.63,w:270},{x:879.87,y:-3009.04,z:5.63,w:270},{x:879.67,y:-3006.14,z:5.63,w:270},{x:879.67,y:-3003.3,z:5.63,w:270}]],Radius:180},{Name:"Jamestown",Coords:new r.Vector3(359.85,-1931.08,24.61),Spawners:[[{x:348.95,y:-1960.2,z:23.83,w:49.65},{x:353.16,y:-1963.81,z:23.93,w:47.9},{x:357.36,y:-1967.53,z:23.86,w:49.41},{x:362.12,y:-1970.92,z:23.81,w:61.78},{x:367.51,y:-1973.15,z:23.69,w:69.01},{x:373.22,y:-1974.98,z:23.58,w:74.54},{x:351.2,y:-1958.07,z:23.84,w:46.8},{x:355.59,y:-1961.91,z:23.89,w:46.33},{x:359.74,y:-1965.54,z:23.89,w:50.6},{x:363.99,y:-1968.65,z:23.81,w:63.6},{x:369.12,y:-1970.51,z:23.69,w:67.06},{x:374.53,y:-1972.16,z:23.62,w:75.78},{x:353.78,y:-1956.33,z:23.95,w:43.81},{x:357.7,y:-1960.26,z:23.93,w:51.5},{x:362.18,y:-1963.58,z:23.92,w:49.82},{x:366.33,y:-1966.55,z:23.79,w:70.37},{x:371.45,y:-1967.99,z:23.74,w:69.57},{x:376.57,y:-1969.03,z:23.66,w:81.83}],[{x:262.11,y:-2062.4,z:16.72,w:47.71},{x:263.93,y:-2060.12,z:16.79,w:48.6},{x:265.88,y:-2057.85,z:16.81,w:48.68},{x:265.72,y:-2066.85,z:16.55,w:22.83},{x:268.68,y:-2065.98,z:16.54,w:21.39},{x:271.56,y:-2064.94,z:16.55,w:21.11},{x:267.65,y:-2071.77,z:16.41,w:20.7},{x:270.74,y:-2070.71,z:16.44,w:21.6},{x:273.66,y:-2069.75,z:16.41,w:25.41},{x:269.59,y:-2077,z:16.22,w:19.82},{x:272.56,y:-2076.2,z:16.24,w:17.15},{x:275.47,y:-2075.2,z:16.25,w:19.32},{x:271.37,y:-2082.16,z:16.01,w:15.55},{x:274.16,y:-2081.37,z:16.05,w:17.77},{x:277.08,y:-2080.43,z:16.1,w:18.08},{x:270.73,y:-2087.7,z:15.9,w:320.27},{x:273.15,y:-2089.68,z:15.82,w:321.51},{x:275.55,y:-2091.63,z:15.76,w:319.95}]],Radius:200}]},586:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterNUICallback=t.SetUIFocus=t.SendUIMessage=t.GetRandom=t.Delay=t.exp=void 0,t.exp=a.g.exports,t.Delay=e=>new Promise((t=>setTimeout(t,e))),t.GetRandom=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,t.SendUIMessage=IsDuplicityVersion()?()=>console.warn("SendUIMessage does exist on server."):(e,a,r)=>{t.exp["fw-ui"].SendUIMessage(e,a,r)},t.SetUIFocus=IsDuplicityVersion()?()=>console.warn("SetUIFocus does exist on server."):(e,a)=>{t.exp["fw-ui"].SetUIFocus(e,a)},t.RegisterNUICallback=IsDuplicityVersion()?()=>console.log("RegisterNUICallback can't be used on server."):(e,t)=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,t)}}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,a),i.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a(483)})();